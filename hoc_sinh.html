<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitty AI - Pro Version</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="external-header">
        <div class="mascot-box">
            <span class="mascot-emoji">üê±</span>
            </div>

        <h1 class="brand-title">G√≥c t√¢m l√Ω h·ªçc ƒë∆∞·ªùng</h1>
        <p class="brand-slogan">N∆°i l·∫Øng nghe, th·∫•u hi·ªÉu v√† chia s·∫ª m·ªçi t√¢m t∆∞ c·ªßa b·∫°n
</p>
    </div>
    

    <div class="app-container">
        
        <div class="chat-header-tools">
            <button class="theme-btn" onclick="toggleTheme()" title="ƒê·ªïi ch·∫ø ƒë·ªô S√°ng/T·ªëi">
                üåô
            </button>
        </div>

        <div class="chat-area" id="chatBox">

        </div>

        <div class="typing" id="typingIndicator">
            <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
        
        <div class="float-reset" onclick="activateReset()" title="T√°i t·∫°o nƒÉng l∆∞·ª£ng">
            <i class="fas fa-redo"></i>
        </div>

        <div class="input-container">
            <input type="text" id="userInput" placeholder="Nh·∫≠p tin nh·∫Øn..." autocomplete="off">
            <button class="icon-btn mic-btn" id="voiceBtn" onclick="startDictation()">
                <i class="fas fa-microphone"></i>
            </button>
            <button class="icon-btn send-btn" onclick="handleChat()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>

        <div class="tools-bar">
            <button class="tool-btn" onclick="openModal('statsModal')">
                <i class="fas fa-chart-line" style="color:#0984e3"></i> Th·ªëng k√™
            </button>
            <button class="tool-btn" onclick="openModal('therapyModal')">
                <i class="fas fa-heartbeat" style="color:#e84393"></i> Tr·ªã li·ªáu
            </button>
            <button class="tool-btn" onclick="openModal('gameModal')">
                <i class="fas fa-gamepad" style="color:#f1c40f"></i> Game
            </button>
            <button class="tool-btn" onclick="openModal('mapModal')">
                <i class="fas fa-users" style="color:#00b894"></i> L·ªõp h·ªçc
            </button>
        </div>
    </div>

    <div class="modal" id="gameModal">
        <div class="modal-content"> <div class="modal-header">
                <span>üéÆ Block Blast</span>
                <button class="close-btn" onclick="closeModal('gameModal')">√ó</button>
            </div>
            <div class="game-header-info">
                <div class="score-box"><span class="score-label">ƒêi·ªÉm</span><br><span class="score-val" id="scoreVal">0</span></div>
                <div class="score-box"><span class="score-label">K·ª∑ l·ª•c</span><br><span class="score-val" id="bestScoreVal">0</span></div>
            </div>
            <div style="position: relative; display: flex; justify-content: center;">
                <canvas id="gameCanvas" width="300" height="380"></canvas>
                <div id="gameOverOverlay">
                    <h2>GAME OVER!</h2>
                    <p>ƒêi·ªÉm: <span id="finalScore">0</span></p>
                    <button class="restart-btn" onclick="resetGame()">CH∆†I L·∫†I</button>
                </div>
            </div>
            <div class="preview-container">
                <canvas id="preview1" class="preview-canvas" width="80" height="80"></canvas>
                <canvas id="preview2" class="preview-canvas" width="80" height="80"></canvas>
                <canvas id="preview3" class="preview-canvas" width="80" height="80"></canvas>
            </div>
        </div>
    </div>

    <div class="modal" id="statsModal">
        <div class="modal-backdrop" onclick="closeModal('statsModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-chart-line"></i> Bi·ªÉu ƒê·ªì C·∫£m X√∫c</h3>
                <span class="close-btn" onclick="closeModal('statsModal')">√ó</span>
            </div>
            
            <div class="chart-wrapper">
                <canvas id="emotionChart"></canvas>
            </div>

            <div class="modal-footer">
                <button onclick="renderChart()" class="btn-action btn-refresh">
                    <i class="fas fa-sync"></i> V·∫Ω l·∫°i
                </button>
                <button onclick="clearStats()" class="btn-action btn-reset">
                    <i class="fas fa-trash-alt"></i> X√≥a d·ªØ li·ªáu
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="mapModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>‚ù§Ô∏è M·∫°ng L∆∞·ªõi C·∫£m X√∫c</span>
                <button class="close-btn" onclick="closeModal('mapModal')">√ó</button>
            </div>
            <div class="map-container">
                <div class="map-grid" id="classMapGrid"></div>
                <div class="student-popup" id="studentPopup">
                    <div class="popup-name" id="popupName">B·∫°n b√†n 3</div>
                    <div class="popup-status" id="popupStatus">"ƒêang h∆°i m·ªát..."</div>
                    <button class="send-love-btn" onclick="sendLove()">
                        <i class="fas fa-heart"></i> G·ª≠i nƒÉng l∆∞·ª£ng
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="therapyModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>üíä Tr·ªã Li·ªáu</span>
                <button class="close-btn" onclick="closeModal('therapyModal')">√ó</button>
            </div>
            <div class="therapy-item">
                <span>H√≠t th·ªü 4-7-8</span>
                <button class="therapy-btn-mini" onclick="startExercise('breath')">T·∫≠p</button>
            </div>
            <div class="therapy-item">
                <span>Th∆∞ gi√£n c·ªï vai</span>
                <button class="therapy-btn-mini" onclick="startExercise('stretch')">T·∫≠p</button>
            </div>
            <div class="therapy-item">
                <span>Grounding (Ti·∫øp ƒë·∫•t)</span>
                <button class="therapy-btn-mini" onclick="startExercise('grounding')">T·∫≠p</button>
            </div>
        </div>
    </div>
    <div class="modal" id="sourceModal">
    <div class="modal-backdrop" onclick="closeModal('sourceModal')"></div> <div class="modal-content">
        <div class="modal-header">
            <h3>üìñ Ngu·ªìn tham kh·∫£o</h3>
            <button class="close-btn" onclick="closeModal('sourceModal')">√ó</button>
        </div>
        <div class="modal-body" id="sourceContentText">
            </div>
    </div>
</div>

    <div id="resetOverlay">
        <h2>Th∆∞ gi√£n...</h2>
        <div class="reset-circle" id="resetCount">30</div>
        <button onclick="closeReset()" style="margin-top:20px; padding:10px 20px; border-radius:10px; border:none; cursor:pointer; background:rgba(255,255,255,0.2); color:white;">
            ƒê√£ ·ªïn h∆°n
        </button>
    </div>

    <div id="sosOverlay">
        <div style="font-size:4rem">‚ö†Ô∏è</div>
        <h2>C·∫¢NH B√ÅO</h2>
        <p>H√£y li√™n h·ªá ng∆∞·ªùi th√¢n ngay!</p>
        <a href="tel:111" class="sos-btn">G·ªçi 111</a>
        <button onclick="document.getElementById('sosOverlay').style.display='none'" style="background:none; border:1px solid white; color:white; padding:10px; margin-top:20px; border-radius:10px; cursor:pointer;">
            ƒê√≥ng
        </button>
    </div>
    

    <script src="script.js"></script>
</body>
</html>